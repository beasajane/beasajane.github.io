<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    img {
      display: block;
      opacity: 0;
    }
    img.loaded {
      transition: 1s;
      opacity: 1;
    }
  </style>
</head>
<body>
  Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quidem amet, deserunt reprehenderit fugit architecto ut necessitatibus earum velit adipisci ullam harum sunt nulla iste molestias dignissimos doloribus? Ratione perspiciatis earum delectus porro assumenda deleniti, consequatur veniam quasi possimus maiores sit aliquid quia ut, magni, autem hic aperiam eum reiciendis! Dignissimos, eaque esse! Commodi sapiente molestiae officia error cum libero sequi tempora magnam, voluptatibus natus dolores ipsum. Accusantium illo, architecto sit voluptate consectetur ullam dolorum, quam repellat illum debitis, qui in obcaecati et culpa? Quae, quia mollitia pariatur, animi veritatis nam non illo quisquam ipsam dolor eius libero adipisci. At numquam, corporis cum facere qui inventore unde. Esse neque natus exercitationem animi in ipsam! Odit, distinctio. Asperiores quas dignissimos voluptatum id tenetur distinctio eligendi vitae vel doloremque. Fugit laborum error excepturi amet accusamus laboriosam quo ullam. Tempore magnam laborum exercitationem incidunt in aperiam aut unde autem odio. A, distinctio. Totam, optio? Inventore excepturi voluptates quos blanditiis reiciendis natus et, nesciunt labore sit reprehenderit, eius molestiae. Nobis quidem ex libero perspiciatis esse, quos eius ratione ipsa aspernatur asperiores pariatur dignissimos enim qui. Sit, dolorem. Officia tenetur ipsa sapiente. Earum ipsa obcaecati ducimus amet, nesciunt omnis vitae sit sed animi reprehenderit molestias tenetur autem, maxime voluptatem voluptatibus ea. Magnam in autem tempore? Consequuntur mollitia maiores excepturi. Hic qui soluta quia molestiae nisi eligendi ipsum nostrum consectetur facere quos voluptatem magni deserunt, tempore nulla officiis autem animi quidem! Praesentium labore ipsum enim voluptas placeat esse accusamus beatae ipsam commodi voluptatem unde odio numquam sint non, amet, provident rem possimus, nostrum atque facere sapiente velit aspernatur necessitatibus blanditiis? Hic id nam nemo rerum dolores quo minima, vel libero assumenda. Dolores quibusdam magni laboriosam nam facere beatae quod voluptates est sunt eos, adipisci ullam fugiat autem non inventore eum at suscipit. Maiores porro tenetur beatae, quibusdam similique labore pariatur dolores sequi quos nulla, voluptas vero ea. Ad vitae incidunt pariatur quasi, enim est impedit nisi voluptate officiis sapiente animi molestiae magni vel eum aspernatur corporis dolorem, quod magnam numquam tempore veritatis deleniti qui. Saepe possimus quibusdam totam, neque iusto, odio illo unde animi autem quam repudiandae! Dolores asperiores nam veritatis minus commodi eum suscipit expedita quaerat quae, ea quia architecto cumque, distinctio beatae sit libero. Veniam, corrupti soluta blanditiis dolore ullam ex accusamus quasi voluptatibus, illo deleniti itaque asperiores nam dolorum, nihil ad cumque voluptas distinctio sint cupiditate repellendus nulla consequuntur eveniet at. Laboriosam facere, sed totam voluptas quo natus soluta quia, id, aliquid ducimus exercitationem doloremque? Quas ad distinctio, temporibus cupiditate recusandae illo doloribus labore cum provident id? Pariatur tenetur non eaque tempore voluptatum, repudiandae, incidunt vero delectus minus exercitationem aperiam. Explicabo praesentium maxime provident quos assumenda quod iusto, veritatis quo, quas numquam a, sed nobis inventore fugiat sapiente debitis dolor? Repellendus modi, illum officia recusandae nesciunt non assumenda temporibus, ipsa sed nam laudantium ad eius, itaque nisi. Numquam fuga doloremque autem dolore eaque distinctio neque laboriosam perspiciatis quas eum! Fugiat natus cum eligendi, consequatur suscipit dolor maiores quae! Nobis voluptas culpa ad repudiandae quidem placeat, debitis, adipisci nihil, minima sequi ducimus deserunt necessitatibus voluptatum possimus eaque. Itaque minima, praesentium reiciendis tempora incidunt, nisi, vitae quae quod eos facilis sequi aut amet aperiam quos quaerat! Voluptas aspernatur sapiente saepe iure quibusdam qui eum est sit error nobis? Libero aperiam et atque, recusandae vitae possimus natus hic, minima id aspernatur, aliquam dolore sed necessitatibus minus voluptatem soluta. Placeat molestiae, minus voluptas vel voluptatum exercitationem quibusdam corporis ducimus eligendi laudantium incidunt perferendis nam aut eum est. Vel, suscipit id, sunt magnam praesentium autem harum quos ipsum in quis sit? Necessitatibus placeat ab molestias blanditiis impedit. Possimus fugit fuga, nemo autem quis doloremque eos aliquam sit aperiam, quasi temporibus hic nulla quisquam nihil ab eum saepe voluptas! Eum fugiat, dolorum libero omnis impedit adipisci beatae excepturi vel iure necessitatibus maiores, doloribus atque cum eius, facere mollitia dolore? Consequatur libero nihil ea sapiente ab cupiditate quae, blanditiis tempore officia omnis error sunt, culpa consectetur aliquam repellat maiores iusto, molestiae laboriosam quod. Obcaecati molestiae aperiam beatae! Suscipit, animi deserunt aliquam, laboriosam labore consequuntur natus laborum vel minus praesentium dolor. Vitae, ipsum veniam aspernatur ab excepturi amet tenetur harum facere molestiae voluptate ipsa nesciunt quas cumque dolore consectetur fugiat delectus consequatur atque corporis quo ipsam. Corrupti ullam porro quia mollitia quod laudantium! Omnis, quia numquam. Dignissimos alias asperiores laboriosam harum officia blanditiis odio maxime, velit autem at dolores similique porro? Illum ea beatae, a corporis eligendi, fuga veritatis adipisci ut animi ipsum, asperiores ad iusto eum natus fugit perspiciatis pariatur vitae laudantium inventore sed reprehenderit? Voluptates distinctio, vitae, nihil illum facilis odit suscipit autem nesciunt fugit saepe neque quaerat beatae incidunt id sequi, minus accusantium nam rerum iste debitis numquam laudantium? Magni aut quisquam doloribus quas aperiam? Numquam nobis nihil eligendi tenetur! Vitae, eum ex labore recusandae maiores non? Dolorum nulla itaque ipsum. Similique necessitatibus commodi beatae atque, soluta error suscipit tempore inventore voluptate, quia eligendi quam, reprehenderit possimus aspernatur in! Odio nulla eum dolore illum nemo unde, recusandae dolorum autem ad doloribus culpa enim nostrum cupiditate assumenda vel, eaque temporibus, similique consequuntur explicabo doloremque? Minus tempore inventore accusantium, accusamus nulla neque soluta tenetur ipsa odit incidunt recusandae ea corrupti, quas minima tempora. Ipsa nisi ratione expedita eveniet aut odit illum quam ad mollitia consequatur? Vel quidem similique quod esse laudantium mollitia sunt enim dicta facilis saepe. Pariatur eum quas reiciendis necessitatibus, rem odit amet delectus quasi in, et aliquam ad temporibus consequatur aspernatur ea recusandae nemo libero explicabo rerum quis facere sint veritatis! Aspernatur, dolores. Inventore culpa, laboriosam a provident cum accusantium voluptatum aspernatur eos nulla similique, earum corporis soluta ipsa! Modi placeat deleniti quasi excepturi id, numquam provident cumque ipsam minima maiores at autem amet eaque repudiandae exercitationem, architecto delectus, recusandae eveniet error. Corrupti doloribus incidunt asperiores nesciunt deserunt culpa molestias ad quisquam impedit architecto doloremque, vel eum! Delectus alias nihil vitae, enim tenetur illum molestias rem facere odit incidunt dolorum non optio magni nesciunt! Voluptatem, possimus. Mollitia numquam officiis quae reiciendis, amet sit praesentium sapiente esse consectetur nam.
  <br>
  <img data-src="https://pic2.zhimg.com/v2-3b4fc7e3a1195a081d0259246c38debc_1440w.jpg?source=172ae18b" width='400' height='500'  alt="">
  asd
  <img data-src="http://up.deskcity.org/pic/202010/dt/qcyrevgybb31914.jpg" width='400' height='500' alt="">  
  asd
  <!-- src直接加载  data-src缓动加载   加载成功时，显示出来，渐显，加载过程中opacity=0， 加载成功缓动opacity=1 -->
  <img data-src="http://img.2qqtouxiang.com/pic/TP10048_01.jpg" width='400' height='500' alt="">
  asd
  <img data-src="http://img.2qqtouxiang.com/pic/TP9249_01.jpg" width='400' height='500' alt="">
  asd
  <script>
    
    document.addEventListener('scroll', e => {
      var imgs = Array.from(document.querySelectorAll('img:not(.loaded)')) // 不重复加载
      
      var soonShow = imgs.filter(it => {
        if(it.getBoundingClientRect().y - window.innerHeight < -10) {
          return true
        }
      })
      soonShow.forEach(it => {  //读取data-属性，使用dataset读取
        it.src = it.dataset.src
        // it.src = it.getAttribute('data-src')
        it.onload = function() { // 添加类名
          it.classList.add('loaded')
        }
      })
    })

    
  </script>
  <!-- 延迟加载 -->
  <script async defer src='as1.js'></script> 
  <!-- //async 加载顺序不保证 -->
  <script async defer src='as2.js'></script> 
  <!-- //defer：保证加载顺序 -->
  <script async defer src='as3.js'></script> 
  <!-- // 但都在dom加载完成之后 -->
</body>
</html>